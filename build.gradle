buildscript {
    repositories {
        mavenCentral()

        maven {
            name = "forge"
            url = "http://files.minecraftforge.net/maven"
        }
		maven {
            name = "sonatype"
            url = "https://oss.sonatype.org/content/repositories/snapshots/"
        }
		 maven {
            name = "shadow-repo"
            url = "http://dl.bintray.com/content/johnrengelman/gradle-plugins/"
        }
    }
    dependencies {
        classpath 'net.minecraftforge.gradle:ForgeGradle:1.0-SNAPSHOT'
		classpath 'org.gradle.plugins:shadow:0.7.4'
    }
}
repositories {
	ivy {
        name 'Forge FS legacy'
        artifactPattern "http://files.minecraftforge.net/[module]/[module]-dev-[revision].[ext]"
    }
	ivy {
        name 'CB FS'
        artifactPattern "http://www.chickenbones.craftsaddle.org/Files/New_Versions/1.6.4/[module]-dev%20[revision].[ext]"
    }

}
apply plugin: 'shadow'

shadow {
	include 'javax/mail/**'
	include 'com/sun/activation/**'
	include 'javax/activation/**'
	include 'com/sun/mail/**'
}

//libsDir = new File('libs')
task download {
	ant.mkdir(dir: "libs")
//	libsDir.mkdirs()
	ant.get(src:"http://teneo.illyohs.us/dependencies/tt/Thaumcraft_Dev_4.0.5b.zip", dest: "libs", verbose:true, usetimestamp:false)
	ant.get(src:"http://teneo.illyohs.us/dependencies/tt/Waila_Dev_1.4.4.zip", dest: "libs", verbose:true, usetimestamp:false)
}

apply plugin: 'forge'

version = "1.0"
group= "vazkii.tinkerer" // http://maven.apache.org/guides/mini/guide-naming-conventions.html
archivesBaseName = "ThaumiicTinkerer"

minecraft {
	version = "1.6.4-9.11.1.964"
	assetDir = "eclipse/assets"
	replaceIn "common/AutoCrashReporter.java"
	if (project.hasProperty("pass"))
        replace "INSERTPASSWORDHERE", project.pass
}

dependencies {
	
	compile name: 'ForgeMultipart', version: '1.6.4-1.0.0.240', ext: 'jar'
    compile name: 'CodeChickenLib', version: '1.6.4-1.0.0.55', ext: 'jar'
    compile name: 'NotEnoughItems', version: '1.6.1.8', type: 'jar'
    compile name: 'CodeChickenCore', version: '0.9.0.7', type: 'jar'
    compile name: 'EnderStorage', version: '1.4.3.5', type: 'jar'

	compile files (
        "libs/Thaumcraft_Dev_4.0.5b.zip", //Temp till the private repo works
        "libs/Waila_Dev_1.4.4.zip" //Temp till private the repo work
            )
    compile 'javax.mail:mail:1.4'
}

processResources
{
    // replace stuff in mcmod.info, nothing else
    from(sourceSets.main.resources.srcDirs) {
        include 'mcmod/info'
                
        // replace version and mcversion
        expand 'version':project.version, 'mcversion':project.minecraft.version
    }
        
    // copy everything else, thats not the mcmod.info
    from(sourceSets.main.resources.srcDirs) {
        exclude 'mcmod.info'
    }
	task deobfJar(type: Jar) {
    from sourceSets.main.output
    classifier = 'deobf'
	}
	artifacts {
		archives deobfJar
	}
}